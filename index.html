<!DOCTYPE html>
<html lang="no">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;900&display=swap"
      rel="stylesheet"
    />
    <link rel="canonical" href="https://prosentregning.no" />
    <title>Prosentregning | Renteberegning | Prosentkalkulator</title>
    <meta
      name="description"
      content="Enkel og rask prosentregning med en prosentkalkulator. Beregn renter, rabatt, økning, reduksjon og prosentandeler. Perfekt for privatøkonomi og bedrifter."
    />

    <style>
              /*
                   SPACING SYSTEM (px)
                   2 / 4 / 8 / 12 / 16 / 24 / 32 / 48 / 64 / 80 / 96 / 128
                   FONT SIZE SYSTEM (px)
                   10 / 12 / 14 / 16 / 18 / 20 / 24 / 30 / 36 / 44 / 52 / 62 / 74 / 86 / 98
                   */
              /*
                   MAIN COLOR: #ffe88b
                   Secondary COLOR: #f9a66c
                   Secondary COLOR: #95f0a9
                    */

              /* Base styles remain the same but with responsive adjustments */

              * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
              }

              h1 {
                font-family: "Roboto", sans-serif;
                font-size: 42px;
                font-weight: 900;
                line-height: 60px;
                color: #000000;
                margin-bottom: 10px;
                animation: bounce 8s ease-in-out infinite;
              }

              @keyframes bounce {
                0%, 100% {
                  transform: translateY(0);
                }
                50% {
                  transform: translateY(-5px);
                }
              }

              h2 {
                font-family: "Roboto", sans-serif;
                font-size: 28px;
                font-weight: 400;
                line-height: 32px;
                color: #000;
                margin-bottom: 20px;
              }

              h3 {
                font-family: "Roboto", sans-serif;
                font-size: 18px;
                font-weight: 400;
                line-height: 22px;
                color: #000;
                margin-bottom: 20px;
                opacity: 100%;
              }

              h4 {
                font-family: "Roboto", sans-serif;
                font-size: 16px;
                font-weight: 400;
                line-height: 28px;
                margin: auto;
              }

              h5 {
                font-family: "Roboto", sans-serif;
                font-size: 14px;
                font-weight: 400;
                color: #000000;
                margin-bottom: 18px;
                opacity: 80%;
              }

              p {
                font-family: "Russo One", sans-serif;
                font-size: 20px;
                line-height: 24px;
                opacity: 100%;
              }

              hr {
                display: block;
                margin: 16px auto 24px;
                border: 0;
                height: 4px;
                width: 200px;
                background: #000;
              }

              body {
                font-family: "Roboto", serif;
                color: #000;
                line-height: 1;
                background: #ffe88b;
                padding-top: 48px; /* restore breathing room at top */
              }

              @media (pointer: fine) {
                body {
                  cursor: none;
                }

                .lava-cursor {
                  position: fixed;
                  inset: 0;
                  z-index: 9999;
                  pointer-events: none;
                }
              }

              /* Making header and subheader responsive */
              .header {
                width: 90%; /* Changed from fixed 600px */
                max-width: 600px;
                opacity: 90%;
                margin: 0 auto;
                text-align: center;
              }

              .subheader {
                width: 90%; /* Changed from fixed 600px */
                max-width: 600px;
                font-size: 24px;
                font-weight: 400;
                opacity: 90%;
                margin: 0 auto;
                text-align: center;
              }

              canvas {
                position: absolute;
                z-index: -1;
                width: 100%;
                height: 100%;
              }

              .container {
                width: 90%; /* Changed from fixed 1200px */
                max-width: 1200px;
                margin: 64px auto 96px; /* add space above/below calculators */
                display: grid;
                grid-template-columns: 1fr; /* Single column by default */
                gap: 20px;
                padding: 20px;
              }

              .item {
                border-radius: 8em 4em;
                border-color: #000;
                background-color: #f9a66c;
                opacity: 100%;
                border: none; /* remove default borders */
                box-shadow: rgba(50, 50, 50, 0.5) 0px 10px 20px -20px,
                  rgba(0, 0, 0, 0.3) 0px 10px 10px -30px,
                  rgba(10, 37, 64, 0.25) 0px -2px 2px 0px inset;
              }

              /* Styling for the item containers */
                .item1, .item3 {
                display: grid;
                grid-template-columns: 1fr; /* Single column by default */
                gap: 20px;
                }

              .item2,
              .item4 {
                flex: 1;
                padding: 40px;
              }

              .outro {
                margin: 140px auto 100px; /* more separation from calculators */
                width: 90%; /* Changed from fixed 600px */
                max-width: 600px;
                align-items: center;
              }

              .outro p {
                margin-bottom: 16px; /* add breathing room between paragraphs */
              }

              .number {
                font-size: 24px;
                font-weight: 500;
                color: #000;
              }

              .text {
                font-size: 14px;
                font-weight: 400;
                color: #000;
              }

              .calculator {
                padding: 70px;
                display: flex;
                flex-direction: column;
                gap: 8px;
                padding-bottom: 80px;
                position: relative;
              }

              .holiday-group {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                gap: 10px;
                align-items: stretch;
                width: 100%;
              }

              .holiday-input {
                height: 42px;
                padding: 10px;
                width: 100%;
                flex: none;
              }

              .holiday-group .tax-rate-select {
                width: 100%;
                flex: none;
              }

              .holiday-group button {
                width: 100%;
              }

              .info-badge {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 18px;
                height: 18px;
                border-radius: 50%;
                background: #000;
                color: #ffe88b;
                font-family: "Roboto", sans-serif;
                font-size: 12px;
                font-weight: 700;
                margin-left: 6px;
                cursor: help;
              }

              label {
                margin-top: 10px;
                margin-bottom: 10px;
              }

              input[type="number"] {
                flex: 1; /* Allows inputs to grow and fill available space */
                min-width: 150px; /* Prevents inputs from becoming too narrow */
                background-color: #ffe88b;
                padding: 15px;
                margin-top: 10px;
                margin-bottom: 20px;
                border-radius: 10px;
                font-size: 16px;
                border: none; /* remove default borders */
                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.13),
                  0 1px 2px 0 rgba(0, 0, 0, 0.11);
              }

              input {
                margin-right: 0px;
              }

              ::-webkit-input-placeholder {
                color: #000;
              }

              .input-group {
                display: flex;
                flex-wrap: wrap;
                align-items: flex-end; /* This aligns items at their bottom edge */
                gap: 10px;
              }

              button {
                width: auto; /* Changed from fixed width */
                min-width: 100px;
                padding: 10px;
                background-color: #95f0a9;
                color: #000;
                border-radius: 10px;
                cursor: pointer;
                margin-top: 10px;
                margin-bottom: 20px;
                font: 18px;
                border: none; /* remove default borders */
                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.13),
                  0 1px 2px 0 rgba(0, 0, 0, 0.11);
              }

              /* Example toggle styles */
              details.example {
                position: absolute;
                left: 0;
                right: 0;
                bottom: 24px;
                background: transparent;
                border-radius: 14px;
                padding: 10px 12px;
                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.13);
                text-align: center;
                border: none;
                margin-bottom: 0;
              }

              details.example > summary {
                cursor: pointer;
                font-family: "Roboto", sans-serif;
                font-size: 14px;
                font-weight: 500;
                list-style: none;
                background: transparent;
                border: none;
                display: inline-block;
                padding: 6px 8px;
              }

              details.example > summary::-webkit-details-marker {
                display: none;
              }

              .example-body {
                margin-top: 8px;
                display: grid;
                gap: 8px;
                justify-items: center;
              }

              .example-text {
                font-family: "Roboto", sans-serif;
                font-size: 14px;
                line-height: 20px;
                opacity: 0.9;
              }

              .example-apply {
                width: fit-content;
                min-width: 0;
                padding: 6px 8px;
                font-size: 14px;
                background: transparent;
                border: none;
                box-shadow: none;
              }

              /* Styles for the distribution calculator */
        #valueInputs {
          display: flex;
          flex-direction: column;
          gap: 10px;
          margin-bottom: 20px;
        }

        .distribution-input-group {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .distribution-input-group input {
          flex: 1;
        }

        .percentage-result {
          min-width: 60px;
          font-family: "Roboto", sans-serif;
          font-size: 16px;
        }

        .distribution-controls {
          display: flex;
          gap: 10px;
          margin-bottom: 20px;
        }

        .control-button {
          flex: 1;
          background-color: #95f0a9;
          color: #000;
          border: none;
          border-radius: 10px;
          padding: 10px;
          cursor: pointer;
          box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.13);
        }

        .distribution-results {
          margin-top: 20px;
        }


        /* Styles for the markup/margin calculator */
        .markup-input-group {
          display: flex;
          align-items: flex-end;
          gap: 10px;
          margin-bottom: 20px;
        }

        .markup-input-group label {
          font-family: "Roboto", sans-serif;
          font-size: 14px;
          color: #000;
          margin-bottom: 5px;
        }

        .calculation-type {
          display: flex;
          gap: 10px;
          margin-bottom: 20px;
        }

        .type-button {
          flex: 1;
          padding: 10px;
          background-color: #ffe88b;
          border: none;
          border-radius: 10px;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }

        .type-button.active {
          background-color: #95f0a9;
        }

        .results-section {
          margin-top: 20px;
        }


        /* Styles for the MVA calculator */

        .tax-input-group {
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
          margin-bottom: 20px;
          align-items: center; /* Changed from flex-end to center for consistent alignment */
        }

        .tax-input-group input, .tax-rate-select {
          height: 42px; /* Consistent height for all inputs */
          padding: 10px;
          border-radius: 10px;
          border: none;
          background-color: #ffe88b;
          font-family: "Roboto", sans-serif;
          font-size: 16px;
          box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.13);
          flex: 1;
          min-width: 150px; /* Ensures inputs don't get too narrow */
        }

        /* Specific styling for the select to match other inputs exactly */
      .tax-rate-select {
        appearance: none; /* Removes default select styling */
        -webkit-appearance: none;
        -moz-appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 16px;
        padding-right: 30px; /* Makes space for the dropdown arrow */
      }

        .custom-rate-input {
          flex: 1;
          padding: 10px;
          border-radius: 10px;
          border: none;
          background-color: #ffe88b;
          box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.13);
        }

        .hidden {
          display: none;
        }

        .tax-calculation-type {
          display: flex;
          gap: 10px;
          margin-bottom: 20px;
        }

        .tax-type-button {
          flex: 1;
          padding: 10px;
          background-color: #ffe88b;
          border: none;
          border-radius: 10px;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }

        .tax-type-button.active {
          background-color: #95f0a9;
        }

        .calculate-button {
          width: 100%;
          margin-bottom: 20px;
        }

        .tax-results {
          margin-top: 20px;
        }

        .slider-container {
  margin: 20px 0;
  padding: 0 10px;
}

.slider-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  font-family: "Roboto", sans-serif;
  font-size: 16px;
}

.custom-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: #ffe88b;
  outline: none;
  margin: 10px 0;
}

.custom-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #95f0a9;
  cursor: pointer;
  border: 2px solid #fff;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.custom-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #95f0a9;
  cursor: pointer;
  border: 2px solid #fff;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.slider-marks {
  display: flex;
  justify-content: space-between;
  margin-top: 5px;
  font-family: "Roboto", sans-serif;
  font-size: 14px;
  color: #000;
  opacity: 0.7;
}



              /* Desktop layout adjustments */
              @media (min-width: 1024px) {
                .item1,
                .item3 {
                  grid-template-columns: repeat(2, minmax(0, 1fr));
                }
              }

              /* Ultra-wide layout for 27" screens and above */
              @media (min-width: 1600px) {
                .container {
                  max-width: 1600px;
                }

                .item1,
                .item3 {
                  grid-template-columns: repeat(3, minmax(0, 1fr));
                }
              }

              @media (max-width: 800px) {
                h1 {
                  font-size: 32px;
                  line-height: 1.2;
                }

                h2 {
                  font-size: 24px;
                }

                h3 {
                  font-size: 16px;
                }

                p {
                  font-size: 16px;
                  line-height: 1.4;
                }

                /* Adjustments for calculator sections */
                .calculator {
                  padding: 40px;
                }

                /* Layout adjustments */
                .item1,
                .item3 {
                  grid-template-columns: 1fr;
                }

                .item {
                  width: 100%;
                }
              }

              @media (max-width: 600px) {
                h1 {
                  font-size: 28px;
                }

                .input-group {
                  flex-direction: column;
                }

                input[type="number"] {
                  width: 100%;
                }

                button {
                  width: 100%;
                  margin-left: 0;
                }
                .markup-input-group {
                  flex-direction: column;
                  align-items: stretch;
                }
                .markup-input-group input,
                .markup-input-group button {
                  width: 100%;
                }
                .tax-input-group {
                  flex-direction: column;
                  align-items: stretch;
                }

                .tax-rate-select,
                .custom-rate-input {
                  width: 100%;
                }
                .distribution-input-group {
                  flex-direction: row;
                  flex-wrap: wrap;
                }

                .control-button {
                  width: 100%;
                }
              }
    </style>
  </head>

  <canvas id="lamp-anim" class="lamp-anim" width="auto" height="auto"></canvas>

  <body>
    <div class="header">
      <h1>PROSENTREGNING.NO</h1>
    </div>

    <hr size="4px" width="200px" color="#000" />

    <div class="subheader">
      <p>
        Enkel og nøyaktig prosentregning for alle formål. Regn ut prosent,
        rabatt, økning og reduksjon med en prosentkalkulator.
      </p>
    </div>

    <div class="container">
      <div class="item1">
        <div class="item">
          <!-- Percentage Increase Calculator -->
          <div class="calculator">
            <h2>Prosentvis økning</h2>
            <div class="input-group">
              <label for="increaseInitialValue"></label>
              <input type="number" id="increaseInitialValue" placeholder="Fra" />
              <label for="increaseFinalValue"></label>
              <input type="number" id="increaseFinalValue" placeholder="Til" />
              <button onclick="calculatePercentageIncrease()">
                <h4>Regn ut</h4>
              </button>
            </div>
            <h3>
              Prosentvis økning: <span id="percentageIncreaseResult"></span>%
            </h3>
            <h3>Utregning: <span id="increaseCalculationDetails"></span></h3>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: Fra 200 til 250 gir en økning på 25%.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('percentageIncrease')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <div class="item">
          <!-- Percentage Decrease Calculator -->
          <div class="calculator">
            <h2>Prosentvis nedgang</h2>
            <div class="input-group">
              <label for="decreaseInitialValue"></label>
              <input type="number" id="decreaseInitialValue" placeholder="Fra" />
              <label for="decreaseFinalValue"></label>
              <input type="number" id="decreaseFinalValue" placeholder="Til" />
              <button onclick="calculatePercentageDecrease()">
                <h4>Regn ut</h4>
              </button>
            </div>
            <h3>
              Prosentvis nedgang: <span id="percentageDecreaseResult"></span>%
            </h3>
            <h3>Utregning: <span id="decreaseCalculationDetails"></span></h3>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: Fra 250 til 200 gir en nedgang på 20%.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('percentageDecrease')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <div class="item">
          <!-- Finn prosent av tallet -->
          <div class="calculator">
            <h2>Finn prosentandel av totalen</h2>
            <!-- Wrapping div for alignment -->
            <div class="input-group">
              <!-- <div class="input-container"> -->
              <label for="partValue"></label>
              <input
                type="number"
                id="partValue"
                placeholder="Del av totalen"
              />
              <label for="totalValue"></label>
              <input type="number" id="totalValue" placeholder="Totalverdi" />
              <button onclick="calculatePercentageOfTotal()">
                <h4>Regn ut</h4>
              </button>
            </div>
            <div class="output-container">
              <h3>
                Gir en andel på: <span id="percentageOfTotalResult"></span>%
              </h3>
              <h3>Utregning: <span id="calculationDetai"></span></h3>
            </div>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: 45 av 180 gir en andel på 25%.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('percentageOfTotal')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>
      </div>

      <div class="item3">
        <div class="item">
          <!-- Regne rabatt -->
          <div class="calculator">
            <h2>Hvordan regne ut rabatt</h2>
            <div class="input-group">
              <label for="originalPrice"></label>
              <input
                type="number"
                id="originalPrice"
                placeholder="Pris før rabatt"
              />

              <label for="discountPercentage"></label>
              <input
                type="number"
                id="discountPercentage"
                placeholder="Rabatt i prosent"
              />

              <button onclick="calculateDiscount()"><h4>Regn ut</h4></button>
            </div>
            <h3>Ny pris: <span id="discountedPrice"></span></h3>
            <h3>Penger spart: <span id="amountSaved"></span></h3>
            <h3>Utregning: <span id="Utregning"></span></h3>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: 999 kr med 25% rabatt gir ny pris 749 kr.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('discount')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- Finne delen av tallet -->

        <div class="item">
          <div class="calculator">
            <div class="input-container">
              <h2>Finn delen av tallet</h2>
              <div class="input-group">
                <label for="baseNumber"></label>
                <input
                  type="number"
                  id="baseNumber"
                  placeholder="Prosent av tallet"
                />

                <label for="percentageValue"></label>
                <input
                  type="number"
                  id="percentageValue"
                  placeholder="Hele tallet"
                />

                <button onclick="calculatePercentageOfNumber()">
                  <h4>Regn ut</h4>
                </button>
              </div>
              <p id="error" style="color: red"></p>
              <h3>Svar: <span id="percentageResult"></span></h3>
              <h3>Utregning: <span id="calculationD"></span></h3>
              <details class="example">
                <summary>Se eksempel</summary>
                <div class="example-body">
                  <p class="example-text">
                    Eksempel: 15% av 200 er 30.
                  </p>
                  <button
                    type="button"
                    class="example-apply"
                    onclick="applyExample('percentageOfNumber')"
                  >
                    <h4>Bruk eksempel</h4>
                  </button>
                </div>
              </details>
            </div>
          </div>
        </div>

        <!-- Finn prosentpoeng endring -->

        <div class="item">
          <div class="calculator">
            <h2>Prosentpoeng endring</h2>
            <div class="input-group">
              <label for="initialPercentage"></label>
              <input
                type="number"
                id="initialPercentage"
                placeholder="Fra prosent"
                step="0.1"
              />
              <label for="finalPercentage"></label>
              <input
                type="number"
                id="finalPercentage"
                placeholder="Til prosent"
                step="0.1"
              />
              <button onclick="calculatePercentagePointChange()">
                <h4>Regn ut</h4>
              </button>
            </div>
            <h3>
              Prosentpoeng endring: <span id="percentagePointResult">0</span>
            </h3>
            <h3>
              Prosentvis endring: <span id="percentageChangeResult">0</span>%
            </h3>
            <h3>Utregning: <span id="pointCalculationDetails"></span></h3>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: Fra 20% til 27% gir 7 prosentpoeng.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('percentagePoints')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- Prosentfordeling Kalkulator -->
        <div class="item">
          <div class="calculator">
            <h2>Prosentfordeling</h2>

            <!-- Dynamic input container -->
            <div id="valueInputs">
              <!-- Initial three input fields -->
              <div class="distribution-input-group">
                <input
                  type="number"
                  class="value-input"
                  placeholder="Verdi 1"
                />
                <span class="percentage-result">0%</span>
              </div>
              <div class="distribution-input-group">
                <input
                  type="number"
                  class="value-input"
                  placeholder="Verdi 2"
                />
                <span class="percentage-result">0%</span>
              </div>
              <div class="distribution-input-group">
                <input
                  type="number"
                  class="value-input"
                  placeholder="Verdi 3"
                />
                <span class="percentage-result">0%</span>
              </div>
            </div>

            <!-- Controls for adding/removing fields -->
            <div class="distribution-controls">
              <button onclick="addInputField()" class="control-button">
                <h4>Legg til felt</h4>
              </button>
              <button onclick="removeInputField()" class="control-button">
                <h4>Fjern felt</h4>
              </button>
            </div>

            <!-- Results display -->
            <div class="distribution-results">
              <h3>Total sum: <span id="totalSum">0</span></h3>
              <h3>
                Status: <span id="distributionStatus">Fyll inn verdier</span>
              </h3>
            </div>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: 30, 50 og 20 gir 30%, 50% og 20%.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('distribution')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- Prosent av prosent kalkulator -->
        <div class="item">
          <div class="calculator">
            <h2>Prosent av prosent</h2>
            <div class="input-group">
              <label for="basePercent"></label>
              <input
                type="number"
                id="basePercent"
                placeholder="Første prosent"
                step="0.1"
              />
              <label for="percentOfPercent"></label>
              <input
                type="number"
                id="percentOfPercent"
                placeholder="Andre prosent"
                step="0.1"
              />
              <button onclick="calculatePercentOfPercent()">
                <h4>Regn ut</h4>
              </button>
            </div>
            <h3>
              Resultat: <span id="percentOfPercentResult">0</span>%
            </h3>
            <h3>Utregning: <span id="percentOfPercentCalculation"></span></h3>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: 20% av 15% = 3%.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('percentOfPercent')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- Prosent til desimal og brøk -->
        <div class="item">
          <div class="calculator">
            <h2>Prosent til desimal og brøk</h2>
            <div class="input-group">
              <label for="percentInput"></label>
              <input
                type="number"
                id="percentInput"
                placeholder="Skriv inn prosent"
                step="0.1"
              />
              <button onclick="calculatePercentToDecimalFraction()">
                <h4>Regn ut</h4>
              </button>
            </div>
            <h3>Desimal: <span id="percentDecimalResult">0</span></h3>
            <h3>Brøk: <span id="percentFractionResult">0/1</span></h3>
            <h3>Utregning: <span id="percentToFractionCalculation"></span></h3>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: 12,5% = 0,125 og 1/8.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('percentToFraction')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- Påslag- og marginkalkulator -->

        <div class="item">
          <div class="calculator">
            <h2>Påslag- og marginkalkulator</h2>

            <!-- Cost input section -->
            <div class="markup-input-group">
              <label for="costPrice"></label>
              <input
                type="number"
                id="costPrice"
                placeholder="Skriv inn innkjøpspris"
              />
            </div>

            <!-- Calculation type selector -->
            <div class="calculation-type">
              <button
                onclick="setCalculationType('markup')"
                id="markupButton"
                class="type-button active"
              >
                <h4>Påslag</h4>
              </button>
              <button
                onclick="setCalculationType('margin')"
                id="marginButton"
                class="type-button"
              >
                <h4>Margin</h4>
              </button>
            </div>

            <!-- Percentage input -->
            <div class="markup-input-group">
              <label id="percentageLabel"></label>
              <input
                type="number"
                id="percentageInput"
                placeholder="Skriv inn prosent"
              />
              <button onclick="calculatePrice()">
                <h4>Regn ut</h4>
              </button>
            </div>

            <!-- Results display -->
            <div class="results-section">
              <h3>Salgspris: <span id="sellingPrice">0</span> kr</h3>
              <h3>Fortjeneste: <span id="profit">0</span> kr</h3>
              <h3>Margin: <span id="marginResult">0</span>%</h3>
              <h3>Påslag: <span id="markupResult">0</span>%</h3>
              <h3><span id="calculation"></span></h3>
            </div>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: Innkjøpspris 100 kr med 25% påslag.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('markup')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- MVA-kalkulator -->

        <div class="item">
          <div class="calculator">
            <h2>MVA-kalkulator</h2>

            <!-- Amount input section -->
            <div class="tax-input-group">
              <input
                type="number"
                id="baseAmount"
                placeholder="Skriv inn beløp"
              />

              <!-- Tax rate selector -->
              <select id="taxRate" class="tax-rate-select">
                <option value="25">25% (Standard MVA)</option>
                <option value="15">15% (Mat og drikke)</option>
                <option value="12">12% (Transport)</option>
                <option value="custom">Egendefinert</option>
              </select>

              <!-- Custom tax rate input (hidden by default) -->
              <input
                type="number"
                id="customTaxRate"
                placeholder="Skriv inn skatteprosent"
                class="custom-rate-input hidden"
              />
            </div>

            <!-- Calculation type selector -->
            <div class="tax-calculation-type">
              <button
                onclick="setTaxCalculationType('addTax')"
                id="addTaxButton"
                class="tax-type-button active"
              >
                <h4>Legg til MVA</h4>
              </button>
              <button
                onclick="setTaxCalculationType('removeTax')"
                id="removeTaxButton"
                class="tax-type-button"
              >
                <h4>Trekk fra MVA</h4>
              </button>
            </div>

            <button onclick="calculateTax()" class="calculate-button">
              <h4>Regn ut</h4>
            </button>

            <!-- Results display -->
            <div class="tax-results">
              <h3>Beløp uten MVA: <span id="amountExclTax">0</span> kr</h3>
              <h3>MVA beløp: <span id="taxAmount">0</span> kr</h3>
              <h3>Beløp inkl. MVA: <span id="amountInclTax">0</span> kr</h3>
              <h3>Utregning: <span id="taxCalculation"></span></h3>
            </div>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: 1 000 kr med 25% MVA gir 1 250 kr.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('tax')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>

        <!-- Feriepengekalkulator -->
        <div class="item">
          <div class="calculator">
            <h2>Feriepengekalkulator</h2>

            <div class="holiday-group">
              <label for="holidayBase"></label>
              <input
                type="number"
                id="holidayBase"
                class="holiday-input"
                placeholder="Lønnsgrunnlag"
              />

              <select id="holidayRate" class="tax-rate-select">
                <option value="10.2">10,2% (4 uker ferie)</option>
                <option value="12">12% (5 uker ferie)</option>
                <option value="custom">Egendefinert</option>
              </select>

              <input
                type="number"
                id="holidayCustomRate"
                placeholder="Egendefinert sats (%)"
                class="custom-rate-input holiday-input hidden"
              />
            </div>

            <div class="holiday-group">
              <label for="holidayMonthly"></label>
              <input
                type="number"
                id="holidayMonthly"
                class="holiday-input"
                placeholder="Månedslønn (for trekk/5. uke)"
              />
              <button onclick="calculateHolidayPay()"><h4>Regn ut</h4></button>
            </div>

            <div class="inline-check" style="margin-top: 8px;">
              <input
                type="checkbox"
                id="holidaySubtractSalary"
                checked
                style="width: 18px; height: 18px;"
              />
              Trekk en månedslønn ved ferie
            </div>

            <div class="tax-results">
              <h3>Feriepenger: <span id="holidayGross">0</span> kr</h3>
              <h3>Trekk (månedslønn): <span id="holidayDeductionBase">0</span> kr</h3>
              <h3>
                Ekstra trekk 5. uke:
                <span id="holidayDeductionExtra">0</span> kr
                <span
                  class="info-badge"
                  title="5 uker ferie betyr 25 virkedager. Vanlig månedslønn dekker ca. 21,67 dager, så det trekkes et tillegg på 4/26 av månedslønnen for å dekke differansen."
                  aria-label="Info om ekstra trekk for 5. ferieuke"
                >i</span>
              </h3>
              <h3>Sum trekk: <span id="holidayDeductionTotal">0</span> kr</h3>
              <h3>Utregning: <span id="holidayCalculation"></span></h3>
            </div>
            <details class="example">
              <summary>Se eksempel</summary>
              <div class="example-body">
                <p class="example-text">
                  Eksempel: Lønnsgrunnlag 400 000 kr, sats 12% og månedslønn 35 000 kr.
                </p>
                <button
                  type="button"
                  class="example-apply"
                  onclick="applyExample('holiday')"
                >
                  <h4>Bruk eksempel</h4>
                </button>
              </div>
            </details>
          </div>
        </div>
        
        <!-- Interest Rate Calculator -->
<div class="item">
  <div class="calculator">
    <h2>Lånekalkulator</h2>
    
    <!-- Loan Amount Slider -->
    <div class="slider-container">
      <div class="slider-label">
        <label for="principalAmount">Lånebeløp: <span id="principalAmountValue">100000</span> kr</label>
      </div>
      <input 
        type="range" 
        id="principalAmount" 
        min="0" 
        max="10000000" 
        step="10000" 
        value="100000"
        class="custom-slider"
        oninput="updatePrincipal(this.value)"
      />
      <div class="slider-marks">
        <span>0 kr</span>
        <span>5M kr</span>
        <span>10M kr</span>
      </div>
    </div>

    <!-- Interest Rate Slider -->
    <div class="slider-container">
      <div class="slider-label">
        <label for="interestRate">Rentesats: <span id="interestRateValue">5</span>%</label>
      </div>
      <input 
        type="range" 
        id="interestRate" 
        min="0" 
        max="20" 
        step="0.1" 
        value="5"
        class="custom-slider"
        oninput="updateInterestRate(this.value)"
      />
      <div class="slider-marks">
        <span>0%</span>
        <span>10%</span>
        <span>20%</span>
      </div>
    </div>

    <!-- Time Period Slider -->
    <div class="slider-container">
      <div class="slider-label">
        <label for="timePeriod">Antall år: <span id="timePeriodValue">5</span></label>
      </div>
      <input 
        type="range" 
        id="timePeriod" 
        min="1" 
        max="30" 
        step="1" 
        value="5"
        class="custom-slider"
        oninput="updateTimePeriod(this.value)"
      />
      <div class="slider-marks">
        <span>1</span>
        <span>15</span>
        <span>30</span>
      </div>
    </div>

    <!-- Results display -->
    <div class="tax-results">
      <h3>Månedlig kostnad: <span id="finalAmount">0</span> kr</h3>
      <h3>Totale rentekostnader: <span id="totalInterest">0</span> kr</h3>
      <h3>Totalt å tilbakebetale: <span id="totalPayment">0</span> kr</h3>
      <h3>Utregning: <span id="interestCalculation"></span></h3>
    </div>
    <details class="example">
      <summary>Se eksempel</summary>
      <div class="example-body">
        <p class="example-text">
          Eksempel: Lån 2 500 000 kr, rente 4,5% og 25 år.
        </p>
        <button
          type="button"
          class="example-apply"
          onclick="applyExample('loan')"
        >
          <h4>Bruk eksempel</h4>
        </button>
      </div>
    </details>
  </div>
</div>
      </div>
    </div>

    <div class="outro">
      <h2>Prosent og prosentregning: En enkel innføring</h2>
      <p>
        Prosent er en viktig del av matematikken som hjelper oss med å forstå og
        uttrykke forhold og sammenhenger i hverdagen.
      </p>
      <p>
        Når vi snakker om prosent, deler vi en størrelse inn i hundre like
        deler, og deretter uttrykker vi hvor mange av disse delene som
        representerer det vi vil måle. For eksempel, hvis du har en kake delt
        inn i 100 like biter og tar 25 av dem, har du spist 25 prosent av kaken.
      </p>
      <p>
        Prosentregning hjelper oss med å utføre beregninger som involverer
        prosenter. Dette kan være nyttig i mange situasjoner, som å beregne
        rabatter i butikker, vurdere økonomisk vekst, eller forstå hvor mye en
        investering kan øke over tid.
      </p>
      <p>
        Grunnleggende prosentregning inkluderer å finne prosentandelen av en
        verdi, beregne økninger eller reduksjoner i prosent, og utføre enkle
        sammenligninger mellom prosentandeler. Med noen enkle verktøy og
        forståelse for prosent, kan du løse mange praktiske problemer og ta
        informerte beslutninger i hverdagen.
      </p>
      <p>
        Så, prosent og prosentregning er nyttige verktøy som gjør det enkelt å
        forstå og arbeide med tall i ulike sammenhenger. Nå som du har fått en
        kort introduksjon, kan du begynne å utforske mer om dette spennende
        emnet og bruke det til å løse problemer og ta beslutninger som gjør
        livet ditt litt enklere!
      </p>
      <p>
        Jeg håper denne introduksjonen hjelper deg med å forstå det
        grunnleggende om prosent og prosentregning!
      </p>
    </div>

    <script>
      function calculatePercentageIncrease() {
        const initialValue = parseFloat(
          document.getElementById("increaseInitialValue").value
        );
        const finalValue = parseFloat(
          document.getElementById("increaseFinalValue").value
        );

        if (isNaN(initialValue) || isNaN(finalValue) || initialValue === 0) {
          alert("Vennligst fyll inn gyldige tall");
          return;
        }

        if (finalValue < initialValue) {
          alert("Til må være større enn eller lik Fra for økning");
          return;
        }

        const percentageIncrease =
          ((finalValue - initialValue) / initialValue) * 100;

        const calculationDetails = `(( ${finalValue} - ${initialValue} ) / ${initialValue}) * 100`;

        document.getElementById("percentageIncreaseResult").textContent =
          percentageIncrease.toFixed(2);
        document.getElementById("increaseCalculationDetails").textContent =
          calculationDetails;
      }

      function calculatePercentageDecrease() {
        const initialValue = parseFloat(
          document.getElementById("decreaseInitialValue").value
        );
        const finalValue = parseFloat(
          document.getElementById("decreaseFinalValue").value
        );

        if (isNaN(initialValue) || isNaN(finalValue) || initialValue === 0) {
          alert("Vennligst fyll inn gyldige tall");
          return;
        }

        if (finalValue > initialValue) {
          alert("Til må være mindre enn eller lik Fra for nedgang");
          return;
        }

        const percentageDecrease =
          ((initialValue - finalValue) / initialValue) * 100;

        const calculationDetails = `(( ${initialValue} - ${finalValue} ) / ${initialValue}) * 100`;

        document.getElementById("percentageDecreaseResult").textContent =
          percentageDecrease.toFixed(2);
        document.getElementById("decreaseCalculationDetails").textContent =
          calculationDetails;
      }

      function calculatePercentageOfTotal() {
        const partValue = parseFloat(
          document.getElementById("partValue").value
        );
        const totalValue = parseFloat(
          document.getElementById("totalValue").value
        );

        // Check if partValue and totalValue are valid numbers
        if (isNaN(partValue) || isNaN(totalValue) || totalValue === 0) {
          alert("Invalid input values.");
          return;
        }

        const percentageOfTotal = (partValue / totalValue) * 100;

        // Construct the formula for display
        const percentageOfTotalResult = `${percentageOfTotal.toFixed(2)}`;
        const calculationDetai = `(${partValue} / ${totalValue}) * 100`;

        document.getElementById("percentageOfTotalResult").textContent =
          percentageOfTotalResult;
        document.getElementById("calculationDetai").textContent =
          calculationDetai;
      }

      /*Kalkuler rabatt*/

      function calculateDiscount() {
        // Get values from input fields
        const originalPrice = parseFloat(
          document.getElementById("originalPrice").value
        );
        const discountPercentage = parseFloat(
          document.getElementById("discountPercentage").value
        );

        // Calculate the discount amount
        const discountAmount = (originalPrice * discountPercentage) / 100;

        // Calculate the discounted price
        const discountedPrice = originalPrice - discountAmount;

        // Construct the formula for display
        const Utregning = `(${originalPrice} * ${discountPercentage}) / 100`;

        // Display the results
        document.getElementById(
          "discountedPrice"
        ).textContent = `${discountedPrice.toFixed()}`;
        document.getElementById(
          "amountSaved"
        ).textContent = `${discountAmount.toFixed()}`;
        document.getElementById("Utregning").textContent = Utregning;
      }

      /*Finn del av tallet*/

      function calculatePercentageOfNumber() {
        // Get values from input fields
        let baseNumber = parseFloat(
          document.getElementById("baseNumber").value.trim()
        );
        let percentageValue =
          parseFloat(document.getElementById("percentageValue").value.trim()) /
          100;

        // Check if inputs are numbers
        if (isNaN(baseNumber) || isNaN(percentageValue)) {
          document.getElementById("error").textContent =
            "Please enter valid numbers.";
          return;
        }
        document.getElementById("error").textContent = ""; // Clear any previous errors

        // Calculate the result
        let result = baseNumber * percentageValue;

        // Display results
        const resultElement = document.getElementById("percentageResult");
        const calculationElement = document.getElementById("calculationD");

        if (resultElement && calculationElement) {
          resultElement.textContent = result.toFixed(); // Two decimal places

          // Display the calculation details
          calculationElement.innerHTML = `${baseNumber} × ${percentageValue} = ${(
            baseNumber * percentageValue
          ).toFixed(2)}`;
        } else {
          console.error(
            "Result or calculation elements are missing in the HTML."
          );
        }
      }

      function calculatePercentagePointChange() {
        // Get input values and convert to numbers
        const initialPercentage = parseFloat(
          document.getElementById("initialPercentage").value
        );
        const finalPercentage = parseFloat(
          document.getElementById("finalPercentage").value
        );

        // Check if inputs are valid numbers
        if (isNaN(initialPercentage) || isNaN(finalPercentage)) {
          alert("Vennligst fyll inn begge feltene med gyldige tall");
          return;
        }

        // Calculate percentage point change (simple subtraction)
        const percentagePointChange = finalPercentage - initialPercentage;

        // Calculate percentage change ((new - old) / old * 100)
        const percentageChange =
          initialPercentage !== 0
            ? ((finalPercentage - initialPercentage) /
                Math.abs(initialPercentage)) *
              100
            : 0; // Handle division by zero case

        // Create explanation text
        const calculationDetails = `${finalPercentage}% - ${initialPercentage}% = ${percentagePointChange} prosentpoeng`;

        // Update the display
        document.getElementById("percentagePointResult").textContent =
          percentagePointChange.toFixed(1) + " prosentpoeng";
        document.getElementById("percentageChangeResult").textContent =
          percentageChange.toFixed(1);
        document.getElementById("pointCalculationDetails").textContent =
          calculationDetails;
      }

      // Keep track of the number of input fields
      let inputFieldCount = 3;

      // Function to calculate percentages
      function calculateDistribution() {
        // Get all input values
        const inputs = document.querySelectorAll(".value-input");
        const values = Array.from(inputs).map(
          (input) => parseFloat(input.value) || 0
        );

        // Calculate total
        const total = values.reduce((sum, value) => sum + value, 0);

        // Update total sum display
        document.getElementById("totalSum").textContent = total.toFixed(2);

        // Calculate and update percentages for each input
        const percentageSpans = document.querySelectorAll(".percentage-result");
        values.forEach((value, index) => {
          const percentage = total === 0 ? 0 : (value / total) * 100;
          percentageSpans[index].textContent = percentage.toFixed(1) + "%";
        });

        // Update status message
        const statusElement = document.getElementById("distributionStatus");
        if (total === 0) {
          statusElement.textContent = "Fyll inn verdier";
          statusElement.style.color = "#000";
        } else {
          statusElement.textContent = "Prosentfordeling beregnet";
          statusElement.style.color = "#000";
        }
      }

      // Function to add a new input field
      function addInputField() {
        if (inputFieldCount >= 10) {
          alert("Maksimalt 10 felt tillatt");
          return;
        }

        inputFieldCount++;
        const container = document.getElementById("valueInputs");

        const newGroup = document.createElement("div");
        newGroup.className = "distribution-input-group";

        newGroup.innerHTML = `
        <input type="number" class="value-input" placeholder="Verdi ${inputFieldCount}" />
        <span class="percentage-result">0%</span>
    `;

        container.appendChild(newGroup);

        // Add event listener to new input
        newGroup
          .querySelector(".value-input")
          .addEventListener("input", calculateDistribution);
      }

      // Function to remove the last input field
      function removeInputField() {
        if (inputFieldCount <= 2) {
          alert("Minimum 3 felt kreves");
          return;
        }

        const container = document.getElementById("valueInputs");
        container.removeChild(container.lastChild);
        inputFieldCount--;
        calculateDistribution();
      }

      // Add event listeners to initial input fields
      document.addEventListener("DOMContentLoaded", function () {
        const inputs = document.querySelectorAll(".value-input");
        inputs.forEach((input) => {
          input.addEventListener("input", calculateDistribution);
        });
      });

      let calculationType = "markup"; // Default calculation type

      // Function to switch between markup and margin calculations
      function setCalculationType(type) {
        calculationType = type;

        // Update button states
        document
          .getElementById("markupButton")
          .classList.toggle("active", type === "markup");
        document
          .getElementById("marginButton")
          .classList.toggle("active", type === "margin");

        // Update input label
        const label = document.getElementById("percentageLabel");
        label.textContent = type === "markup" ? "" : "";

        // Clear previous calculations
        clearResults();
      }

      // Function to clear all result fields
      function clearResults() {
        document.getElementById("sellingPrice").textContent = "0";
        document.getElementById("profit").textContent = "0";
        document.getElementById("marginResult").textContent = "0";
        document.getElementById("markupResult").textContent = "0";
        document.getElementById("calculation").textContent = "";
      }

      // Main calculation function
      function calculatePrice() {
        // Get input values
        const costPrice = parseFloat(
          document.getElementById("costPrice").value
        );
        const percentage = parseFloat(
          document.getElementById("percentageInput").value
        );

        // Validate inputs
        if (isNaN(costPrice) || isNaN(percentage)) {
          alert("Vennligst fyll inn både innkjøpspris og prosent");
          return;
        }

        // Perform calculations based on type
        let sellingPrice, profit, margin, markup;

        if (calculationType === "markup") {
          // Calculate from markup percentage
          markup = percentage;
          sellingPrice = costPrice * (1 + markup / 100);
          profit = sellingPrice - costPrice;
          margin = (profit / sellingPrice) * 100;
        } else {
          // Calculate from margin percentage
          margin = percentage;
          sellingPrice = costPrice / (1 - margin / 100);
          profit = sellingPrice - costPrice;
          markup = (profit / costPrice) * 100;
        }

        // Create calculation explanation
        let calculation;
        if (calculationType === "markup") {
          calculation = `Salgspris = Innkjøpspris × (1 + påslag%) = ${costPrice.toFixed(
            2
          )} × (1 + ${markup.toFixed(1)}%) = ${sellingPrice.toFixed(2)}`;
        } else {
          calculation = `Salgspris = Innkjøpspris ÷ (1 - margin%) = ${costPrice.toFixed(
            2
          )} ÷ (1 - ${margin.toFixed(1)}%) = ${sellingPrice.toFixed(2)}`;
        }

        // Update display
        document.getElementById("sellingPrice").textContent =
          sellingPrice.toFixed(2);
        document.getElementById("profit").textContent = profit.toFixed(2);
        document.getElementById("marginResult").textContent = margin.toFixed(1);
        document.getElementById("markupResult").textContent = markup.toFixed(1);
        document.getElementById("calculation").textContent = calculation;
      }

      // Keep track of current calculation type
      let taxCalculationType = "addTax";

      // Function to handle tax rate selection changes
      document.addEventListener("DOMContentLoaded", function () {
        const taxRateSelect = document.getElementById("taxRate");
        const customTaxRate = document.getElementById("customTaxRate");

        taxRateSelect.addEventListener("change", function () {
          // Show/hide custom rate input based on selection
          if (this.value === "custom") {
            customTaxRate.classList.remove("hidden");
          } else {
            customTaxRate.classList.add("hidden");
          }
        });
      });

      // Function to switch between adding and removing tax
      function setTaxCalculationType(type) {
        taxCalculationType = type;

        // Update button states
        document
          .getElementById("addTaxButton")
          .classList.toggle("active", type === "addTax");
        document
          .getElementById("removeTaxButton")
          .classList.toggle("active", type === "removeTax");

        // Clear previous calculations
        clearTaxResults();
      }

      // Function to clear all result fields
      function clearTaxResults() {
        document.getElementById("amountExclTax").textContent = "0";
        document.getElementById("taxAmount").textContent = "0";
        document.getElementById("amountInclTax").textContent = "0";
        document.getElementById("taxCalculation").textContent = "";
      }

      // Main calculation function
      function calculateTax() {
        // Get input values
        const baseAmount = parseFloat(
          document.getElementById("baseAmount").value
        );
        let taxRate;

        // Get tax rate (either from select or custom input)
        const taxRateSelect = document.getElementById("taxRate");
        if (taxRateSelect.value === "custom") {
          taxRate = parseFloat(document.getElementById("customTaxRate").value);
        } else {
          taxRate = parseFloat(taxRateSelect.value);
        }

        // Validate inputs
        if (isNaN(baseAmount) || isNaN(taxRate)) {
          alert("Vennligst fyll inn både beløp og skatteprosent");
          return;
        }

        let amountExclTax, amountInclTax, taxAmount, calculation;

        if (taxCalculationType === "addTax") {
          // Adding tax to base amount
          amountExclTax = baseAmount;
          taxAmount = baseAmount * (taxRate / 100);
          amountInclTax = baseAmount + taxAmount;

          calculation = `${baseAmount.toFixed(2)} + (${baseAmount.toFixed(
            2
          )} × ${taxRate}%) = ${amountInclTax.toFixed(2)}`;
        } else {
          // Removing tax from base amount
          amountInclTax = baseAmount;
          amountExclTax = baseAmount / (1 + taxRate / 100);
          taxAmount = amountInclTax - amountExclTax;

          calculation = `${baseAmount.toFixed(
            2
          )} ÷ (1 + ${taxRate}%) = ${amountExclTax.toFixed(2)}`;
        }

        // Update display
        document.getElementById("amountExclTax").textContent =
          amountExclTax.toFixed(2);
        document.getElementById("taxAmount").textContent = taxAmount.toFixed(2);
        document.getElementById("amountInclTax").textContent =
          amountInclTax.toFixed(2);
        document.getElementById("taxCalculation").textContent = calculation;
      }

      // Handle holiday rate select
      document.addEventListener("DOMContentLoaded", function () {
        const holidayRateSelect = document.getElementById("holidayRate");
        const holidayCustomRate = document.getElementById("holidayCustomRate");

        holidayRateSelect.addEventListener("change", function () {
          if (this.value === "custom") {
            holidayCustomRate.classList.remove("hidden");
          } else {
            holidayCustomRate.classList.add("hidden");
          }
        });
      });

      // Feriepengeberegning
      function calculateHolidayPay() {
        const base = parseFloat(document.getElementById("holidayBase").value);
        const rateSelect = document.getElementById("holidayRate");
        const customRate = parseFloat(
          document.getElementById("holidayCustomRate").value
        );
        const monthly = parseFloat(
          document.getElementById("holidayMonthly").value
        );
        const subtractSalary = document.getElementById(
          "holidaySubtractSalary"
        ).checked;

        let rate = rateSelect.value === "custom" ? customRate : parseFloat(rateSelect.value);

        if (isNaN(base) || isNaN(rate)) {
          alert("Vennligst fyll inn grunnlag og sats");
          return;
        }

        if (subtractSalary && isNaN(monthly)) {
          alert("Vennligst fyll inn månedslønn for trekk");
          return;
        }

        const feriepenger = base * (rate / 100);

        // Base deduction is one month's salary; for 5 uker (12%) an extra 4/26 is typically deducted
        const deductionBase = subtractSalary ? monthly : 0;
        const deductionExtra = subtractSalary && rateSelect.value === "12" ? monthly * (4 / 26) : 0;
        const deductionTotal = deductionBase + deductionExtra;

        const net = feriepenger;

        const format = (value) => Math.round(value).toLocaleString("no");

        let calc = `${base.toFixed(2)} × ${rate}% = ${feriepenger.toFixed(2)}`;
        if (subtractSalary) {
          calc += ` (trekk i lønn: ${deductionBase.toFixed(2)}`;
          if (deductionExtra > 0) {
            calc += ` + ekstra trekk (4/26) ${deductionExtra.toFixed(2)}`;
          }
          calc += `)`;
        }

        document.getElementById("holidayGross").textContent = format(feriepenger);
        document.getElementById("holidayDeductionBase").textContent = format(deductionBase);
        document.getElementById("holidayDeductionExtra").textContent = format(deductionExtra);
        document.getElementById("holidayDeductionTotal").textContent = format(deductionTotal);
        document.getElementById("holidayCalculation").textContent = calc;
      }

      // Update display values for sliders
function updatePrincipal(value) {
  document.getElementById('principalAmountValue').textContent = Number(value).toLocaleString('no');
  calculateInterest();
}

function updateInterestRate(value) {
  document.getElementById('interestRateValue').textContent = value;
  calculateInterest();
}

function updateTimePeriod(value) {
  document.getElementById('timePeriodValue').textContent = value;
  calculateInterest();
}

// Function to clear loan result fields
function clearInterestResults() {
  document.getElementById('finalAmount').textContent = '0';
  document.getElementById('totalInterest').textContent = '0';
  document.getElementById('interestCalculation').textContent = '';
}

// Main calculation function
function calculateInterest() {
  // Get input values
  const principal = parseFloat(document.getElementById('principalAmount').value);
  const rate = parseFloat(document.getElementById('interestRate').value) / 100;
  const years = parseFloat(document.getElementById('timePeriod').value);
  
  // Calculate monthly payment using mortgage formula: M = P[r(1 + r)^n]/[(1 + r)^n - 1]
  const monthlyRate = rate / 12;
  const numberOfPayments = years * 12;
  const monthlyPayment = principal * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
  
  const totalPayment = monthlyPayment * numberOfPayments;
  const totalInterest = totalPayment - principal;
  
  let calculation = `Månedlig betaling = ${monthlyPayment.toFixed(0).toLocaleString('no')} kr × ${numberOfPayments} måneder`;
  
  // Update display with Norwegian number formatting
  document.getElementById('finalAmount').textContent = Math.round(monthlyPayment).toLocaleString('no');
  document.getElementById('totalInterest').textContent = Math.round(totalInterest).toLocaleString('no');
  document.getElementById('totalPayment').textContent = Math.round(totalPayment).toLocaleString('no');
  document.getElementById('interestCalculation').textContent = calculation;
}

// Initialize calculation on page load
document.addEventListener('DOMContentLoaded', calculateInterest);

// Lava cursor with long tail
(function initLavaCursor() {
  if (!window.matchMedia || !window.matchMedia('(pointer: fine)').matches) {
    return;
  }

  const canvas = document.createElement('canvas');
  canvas.className = 'lava-cursor';
  const ctx = canvas.getContext('2d');
  document.body.appendChild(canvas);

  const resize = () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  };
  resize();
  window.addEventListener('resize', resize);

  const trailLength = 40;
  const trail = Array.from({ length: trailLength }, () => ({ x: 0, y: 0 }));
  const target = { x: window.innerWidth / 2, y: window.innerHeight / 2 };

  window.addEventListener('mousemove', (event) => {
    target.x = event.clientX;
    target.y = event.clientY;
  });

  const draw = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Smoothly follow the cursor
    trail[0].x += (target.x - trail[0].x) * 0.35;
    trail[0].y += (target.y - trail[0].y) * 0.35;
    for (let i = 1; i < trail.length; i += 1) {
      trail[i].x += (trail[i - 1].x - trail[i].x) * 0.25;
      trail[i].y += (trail[i - 1].y - trail[i].y) * 0.25;
    }

    // Draw neon tail
    for (let i = trail.length - 1; i >= 1; i -= 1) {
      const t = i / trail.length;
      const radius = 10 * (1 - t) + 2;
      const alpha = Math.max(0, 0.9 - t * 0.8);
      const gradient = ctx.createRadialGradient(
        trail[i].x,
        trail[i].y,
        0,
        trail[i].x,
        trail[i].y,
        radius
      );
      gradient.addColorStop(0, `rgba(120, 255, 255, ${alpha})`);
      gradient.addColorStop(0.5, `rgba(0, 200, 255, ${alpha * 0.9})`);
      gradient.addColorStop(1, `rgba(0, 80, 200, 0)`);
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(trail[i].x, trail[i].y, radius, 0, Math.PI * 2);
      ctx.fill();
    }

    requestAnimationFrame(draw);
  };

  draw();
})();

// Prosent av prosent
function calculatePercentOfPercent() {
  const basePercent = parseFloat(
    document.getElementById('basePercent').value
  );
  const percentOfPercent = parseFloat(
    document.getElementById('percentOfPercent').value
  );

  if (isNaN(basePercent) || isNaN(percentOfPercent)) {
    alert('Vennligst fyll inn begge prosenter');
    return;
  }

  const result = (basePercent * percentOfPercent) / 100;
  document.getElementById('percentOfPercentResult').textContent =
    result.toFixed(2).replace(/\.00$/, '');
  document.getElementById('percentOfPercentCalculation').textContent =
    `${percentOfPercent}% av ${basePercent}% = ${result.toFixed(2)}%`;
}

function gcd(a, b) {
  let x = Math.abs(a);
  let y = Math.abs(b);
  while (y !== 0) {
    const temp = y;
    y = x % y;
    x = temp;
  }
  return x;
}

function formatDecimal(value) {
  const fixed = value.toFixed(6).replace(/0+$/, '').replace(/\.$/, '');
  return fixed.replace('.', ',');
}

// Prosent til desimal og brøk
function calculatePercentToDecimalFraction() {
  const rawValue = document.getElementById('percentInput').value;
  const normalized = rawValue.replace(',', '.');
  const percent = parseFloat(normalized);

  if (isNaN(percent)) {
    alert('Vennligst fyll inn en prosentverdi');
    return;
  }

  const decimal = percent / 100;
  const decimalText = formatDecimal(decimal);

  const decimalPlaces = normalized.includes('.')
    ? normalized.split('.')[1].length
    : 0;
  const scale = Math.pow(10, decimalPlaces);
  const numerator = Math.round(percent * scale);
  const denominator = 100 * scale;
  const divisor = gcd(numerator, denominator) || 1;
  const simplifiedNumerator = numerator / divisor;
  const simplifiedDenominator = denominator / divisor;

  document.getElementById('percentDecimalResult').textContent = decimalText;
  document.getElementById('percentFractionResult').textContent =
    `${simplifiedNumerator}/${simplifiedDenominator}`;
  document.getElementById('percentToFractionCalculation').textContent =
    `${percent}% = ${decimalText} = ${simplifiedNumerator}/${simplifiedDenominator}`;
}

// Apply example values per calculator
function applyExample(type) {
  switch (type) {
    case 'percentageIncrease': {
      document.getElementById('increaseInitialValue').value = 200;
      document.getElementById('increaseFinalValue').value = 250;
      calculatePercentageIncrease();
      break;
    }
    case 'percentageDecrease': {
      document.getElementById('decreaseInitialValue').value = 250;
      document.getElementById('decreaseFinalValue').value = 200;
      calculatePercentageDecrease();
      break;
    }
    case 'percentageOfTotal': {
      document.getElementById('partValue').value = 45;
      document.getElementById('totalValue').value = 180;
      calculatePercentageOfTotal();
      break;
    }
    case 'discount': {
      document.getElementById('originalPrice').value = 999;
      document.getElementById('discountPercentage').value = 25;
      calculateDiscount();
      break;
    }
    case 'percentageOfNumber': {
      document.getElementById('baseNumber').value = 200;
      document.getElementById('percentageValue').value = 15;
      calculatePercentageOfNumber();
      break;
    }
    case 'percentagePoints': {
      document.getElementById('initialPercentage').value = 20;
      document.getElementById('finalPercentage').value = 27;
      calculatePercentagePointChange();
      break;
    }
    case 'distribution': {
      const inputs = document.querySelectorAll('.value-input');
      if (inputs[0]) inputs[0].value = 30;
      if (inputs[1]) inputs[1].value = 50;
      if (inputs[2]) inputs[2].value = 20;
      for (let i = 3; i < inputs.length; i += 1) {
        inputs[i].value = '';
      }
      calculateDistribution();
      break;
    }
    case 'markup': {
      setCalculationType('markup');
      document.getElementById('costPrice').value = 100;
      document.getElementById('percentageInput').value = 25;
      calculatePrice();
      break;
    }
    case 'tax': {
      setTaxCalculationType('addTax');
      document.getElementById('baseAmount').value = 1000;
      const taxRateSelect = document.getElementById('taxRate');
      taxRateSelect.value = '25';
      taxRateSelect.dispatchEvent(new Event('change'));
      calculateTax();
      break;
    }
    case 'holiday': {
      document.getElementById('holidayBase').value = 400000;
      const holidayRate = document.getElementById('holidayRate');
      holidayRate.value = '12';
      holidayRate.dispatchEvent(new Event('change'));
      document.getElementById('holidayMonthly').value = 35000;
      document.getElementById('holidaySubtractSalary').checked = true;
      calculateHolidayPay();
      break;
    }
    case 'loan': {
      const principal = 2500000;
      const rate = 4.5;
      const years = 25;
      document.getElementById('principalAmount').value = principal;
      document.getElementById('interestRate').value = rate;
      document.getElementById('timePeriod').value = years;
      updatePrincipal(principal);
      updateInterestRate(rate);
      updateTimePeriod(years);
      break;
    }
    case 'percentOfPercent': {
      document.getElementById('basePercent').value = 15;
      document.getElementById('percentOfPercent').value = 20;
      calculatePercentOfPercent();
      break;
    }
    case 'percentToFraction': {
      document.getElementById('percentInput').value = 12.5;
      calculatePercentToDecimalFraction();
      break;
    }
    default:
      break;
  }
}


      /* lavaAnimation */

      window.lavaAnimation = (function () {
        "use strict";
        var t,
          i = {
            screen: {
              elem: null,
              callback: null,
              ctx: null,
              width: 0,
              height: 0,
              left: 0,
              init: function (t, i, s) {
                return (
                  (this.elem = document.getElementById(t)),
                  (this.callback = i || null),
                  "CANVAS" == this.elem.tagName &&
                    (this.ctx = this.elem.getContext("2d")),
                  window.addEventListener(
                    "resize",
                    function () {
                      this.resize();
                    }.bind(this),
                    !1
                  ),
                  (this.elem.onselectstart = function () {
                    return !1;
                  }),
                  (this.elem.ondrag = function () {
                    return !1;
                  }),
                  s && this.resize(),
                  this
                );
              },
              resize: function () {
                var t = this.elem;
                for (
                  this.width = t.offsetWidth,
                    this.height = t.offsetHeight,
                    this.left = 0,
                    this.top = 0;
                  null != t;
                  t = t.offsetParent
                )
                  (this.left += t.offsetLeft), (this.top += t.offsetTop);
                this.ctx &&
                  ((this.elem.width = this.width),
                  (this.elem.height = this.height)),
                  this.callback && this.callback();
              },
            },
          },
          s = function (t, i) {
            (this.x = t),
              (this.y = i),
              (this.magnitude = t * t + i * i),
              (this.computed = 0),
              (this.force = 0);
          };
        s.prototype.add = function (t) {
          return new s(this.x + t.x, this.y + t.y);
        };
        var h = function (t) {
          var i = 0.1,
            h = 1.5;
          (this.vel = new s(
            (Math.random() > 0.5 ? 1 : -1) * (0.2 + 0.25 * Math.random()),
            (Math.random() > 0.5 ? 1 : -1) * (0.2 + Math.random())
          )),
            (this.pos = new s(
              0.2 * t.width + Math.random() * t.width * 0.6,
              0.2 * t.height + Math.random() * t.height * 0.6
            )),
            (this.size =
              t.wh / 15 + (Math.random() * (h - i) + i) * (t.wh / 15)),
            (this.width = t.width),
            (this.height = t.height);
        };
        h.prototype.move = function () {
          this.pos.x >= this.width - this.size
            ? (this.vel.x > 0 && (this.vel.x = -this.vel.x),
              (this.pos.x = this.width - this.size))
            : this.pos.x <= this.size &&
              (this.vel.x < 0 && (this.vel.x = -this.vel.x),
              (this.pos.x = this.size)),
            this.pos.y >= this.height - this.size
              ? (this.vel.y > 0 && (this.vel.y = -this.vel.y),
                (this.pos.y = this.height - this.size))
              : this.pos.y <= this.size &&
                (this.vel.y < 0 && (this.vel.y = -this.vel.y),
                (this.pos.y = this.size)),
            (this.pos = this.pos.add(this.vel));
        };
        var e = function (t, i, e, n, a) {
          (this.step = 5),
            (this.width = t),
            (this.height = i),
            (this.wh = Math.min(t, i)),
            (this.sx = Math.floor(this.width / this.step)),
            (this.sy = Math.floor(this.height / this.step)),
            (this.paint = !1),
            (this.metaFill = r(t, i, t, n, a)),
            (this.plx = [0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0]),
            (this.ply = [0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1]),
            (this.mscases = [0, 3, 0, 3, 1, 3, 0, 3, 2, 2, 0, 2, 1, 1, 0]),
            (this.ix = [
              1, 0, -1, 0, 0, 1, 0, -1, -1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1,
            ]),
            (this.grid = []),
            (this.balls = []),
            (this.iter = 0),
            (this.sign = 1);
          for (var o = 0; o < (this.sx + 2) * (this.sy + 2); o++)
            this.grid[o] = new s(
              (o % (this.sx + 2)) * this.step,
              Math.floor(o / (this.sx + 2)) * this.step
            );
          for (var l = 0; e > l; l++) this.balls[l] = new h(this);
        };
        (e.prototype.computeForce = function (t, i, s) {
          var h,
            e = s || t + i * (this.sx + 2);
          if (0 === t || 0 === i || t === this.sx || i === this.sy)
            h = 0.6 * this.sign;
          else {
            h = 0;
            for (var r, n = this.grid[e], a = 0; (r = this.balls[a++]); )
              h +=
                (r.size * r.size) /
                (-2 * n.x * r.pos.x -
                  2 * n.y * r.pos.y +
                  r.pos.magnitude +
                  n.magnitude);
            h *= this.sign;
          }
          return (this.grid[e].force = h), h;
        }),
          (e.prototype.marchingSquares = function (t) {
            var i = t[0],
              s = t[1],
              h = t[2],
              e = i + s * (this.sx + 2);
            if (this.grid[e].computed === this.iter) return !1;
            for (var r, n = 0, a = 0; 4 > a; a++) {
              var l =
                  i + this.ix[a + 12] + (s + this.ix[a + 16]) * (this.sx + 2),
                d = this.grid[l].force;
              ((d > 0 && this.sign < 0) || (0 > d && this.sign > 0) || !d) &&
                (d = this.computeForce(
                  i + this.ix[a + 12],
                  s + this.ix[a + 16],
                  l
                )),
                Math.abs(d) > 1 && (n += Math.pow(2, a));
            }
            if (15 === n) return [i, s - 1, !1];
            5 === n
              ? (r = 2 === h ? 3 : 1)
              : 10 === n
              ? (r = 3 === h ? 0 : 2)
              : ((r = this.mscases[n]), (this.grid[e].computed = this.iter));
            var p =
              this.step /
              (Math.abs(
                Math.abs(
                  this.grid[
                    i +
                      this.plx[4 * r + 2] +
                      (s + this.ply[4 * r + 2]) * (this.sx + 2)
                  ].force
                ) - 1
              ) /
                Math.abs(
                  Math.abs(
                    this.grid[
                      i +
                        this.plx[4 * r + 3] +
                        (s + this.ply[4 * r + 3]) * (this.sx + 2)
                    ].force
                  ) - 1
                ) +
                1);
            return (
              o.lineTo(
                this.grid[
                  i + this.plx[4 * r] + (s + this.ply[4 * r]) * (this.sx + 2)
                ].x +
                  this.ix[r] * p,
                this.grid[
                  i +
                    this.plx[4 * r + 1] +
                    (s + this.ply[4 * r + 1]) * (this.sx + 2)
                ].y +
                  this.ix[r + 4] * p
              ),
              (this.paint = !0),
              [i + this.ix[r + 4], s + this.ix[r + 8], r]
            );
          }),
          (e.prototype.renderMetaballs = function () {
            for (var t, i = 0; (t = this.balls[i++]); ) t.move();

            this.iter++,
              (this.sign = -this.sign),
              (this.paint = !1),
              // Setting up shadow
              (o.shadowColor = "rgba(0, 0, 0, 0.2)");
            o.shadowBlur = 10;
            o.shadowOffsetX = 2;
            o.shadowOffsetY = 2;

            (o.fillStyle = this.metaFill), o.beginPath(), (i = 0);

            for (; (t = this.balls[i++]); ) {
              var s = [
                Math.round(t.pos.x / this.step),
                Math.round(t.pos.y / this.step),
                !1,
              ];
              do s = this.marchingSquares(s);
              while (s);
              this.paint &&
                (o.fill(), o.closePath(), o.beginPath(), (this.paint = !1));
            }
          });

        var r = function (t, i, s, h, e) {
          var r = o.createRadialGradient(t / 1, i / 1, 0, t / 1, i / 1, s);
          return r.addColorStop(0, h), r.addColorStop(1, e), r;
        };
        if (document.getElementById("lamp-anim")) {
          var n = function () {
              requestAnimationFrame(n),
                o.clearRect(0, 0, a.width, a.height),
                t.renderMetaballs();
            },
            a = i.screen.init("lamp-anim", null, !0),
            o = a.ctx;
          a.resize(), (t = new e(a.width, a.height, 6, "#ffe88b", "#ffe88b"));
        }
        return { run: n };
      })();

      if (document.getElementById("lamp-anim")) {
        lavaAnimation.run();
      }
      setTimeout(function () {
        $(".js-works-d-list").addClass("is-loaded");
      }, 150);
    </script>
  </body>
</html>
